@use "sass:map";

$color_1: var(--light-yellow-1);
$background-color_1: #08441ce6;
$navbar: (
	'height': (
		'desktop': 80px,
		'laptop': 72px,
		'tablet': 68px,
		'mobile': 64px
	),
	'padding': (
		'desktop': 32px,
		'laptop': 28px,
		'tablet': 24px,
		'mobile': 20px
	),
	'border-radius': (
		'desktop': 40px,
		'laptop': 36px,
		'tablet': 32px,
		'mobile': 28px
	),
	'background': (
		'default': rgba(8, 68, 28, 0.95),
		'scrolled': rgba(8, 68, 28, 0.98)
	)
);

// Update breakpoints for better responsiveness
$breakpoints: (
	'mobile': 576px,
	'tablet': 768px,
	'laptop': 1024px,
	'desktop': 1200px,
	'large': 1440px
);

// Calculations for perfect roundness
$button-height: calc(#{map.get($navbar, 'height', 'desktop')} - #{map.get($navbar, 'padding', 'desktop')} * 2);
$button-border-radius: 20px;
$inner-padding: 20px;

// 2. Animation variables
$transitions: (
	'default': all 0.3s ease,
	'transform': transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
	'opacity': opacity 0.2s ease,
	'background': background-color 0.3s ease
);

// 3. Mixins for common patterns
@mixin glass-effect {
	backdrop-filter: blur(10px);
	-webkit-backdrop-filter: blur(10px);
	background-color: map.get($navbar, 'background', 'default');
	border: 1px solid rgba(255, 255, 255, 0.1);
}

@mixin hover-lift {
	transition: map.get($transitions, 'transform');
	&:hover {
		transform: translateY(-2px);
	}
}

// Add new text scaling variables
$text-scale: (
	'desktop': 1,
	'laptop': 0.95,
	'tablet': 0.9,
	'mobile': 0.85
);

// Add mobile menu specific variables
$mobile-menu: (
	'padding-v': 32px,
	'padding-h': 24px,
	'gap': 24px,
	'button-height': 64px
);

// Create media mixins
@mixin respond-to($breakpoint) {
	@if map.has-key($breakpoints, $breakpoint) {
		@media screen and (max-width: map.get($breakpoints, $breakpoint)) {
			@content;
		}
	}
}

@mixin respond-between($min, $max) {
	@if map.has-key($breakpoints, $min) and map.has-key($breakpoints, $max) {
		@media screen and (min-width: map.get($breakpoints, $min)) and (max-width: map.get($breakpoints, $max)) {
			@content;
		}
	}
}

// Add CSS variable for navbar height to make it accessible by other components
:root {
  --navbar-height: #{map.get($navbar, 'height', 'desktop')};
  --navbar-height-laptop: #{map.get($navbar, 'height', 'laptop')};
  --navbar-height-tablet: #{map.get($navbar, 'height', 'tablet')};
  --navbar-height-mobile: #{map.get($navbar, 'height', 'mobile')};
  --section-padding-mobile: 16px;

  @include respond-to('laptop') {
    --navbar-height: #{map.get($navbar, 'height', 'laptop')};
  }

  @include respond-to('tablet') {
    --navbar-height: #{map.get($navbar, 'height', 'tablet')};
  }

  @include respond-to('mobile') {
    --navbar-height: #{map.get($navbar, 'height', 'mobile')};
	}
}

.nav-bar-container {
	position: relative;
	z-index: 50;
	width: 100%;
	padding: 16px var(--section-padding);
	position: fixed;
	top: 0;
	left: 0;
	display: flex;
	justify-content: center;
	pointer-events: none;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

	@include respond-to('tablet') {
	  padding: 12px var(--section-padding);
	}

	@include respond-to('mobile') {
	  padding: 8px var(--section-padding-mobile, 16px);
	}

	.nav-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 40;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: auto;

    &.active {
      opacity: 1;
    }

    @include respond-to('tablet') {
      backdrop-filter: blur(3px);
    }
  }

	.nav-bar {
		max-width: var(--section-max-width);
		width: 100%;
		height: map.get($navbar, 'height', 'desktop');
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 0 map.get($navbar, 'padding', 'desktop');
		border-radius: map.get($navbar, 'border-radius', 'desktop');
		pointer-events: auto;
		@include glass-effect;
		box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		position: relative;

		@include respond-to('laptop') {
		  height: map.get($navbar, 'height', 'laptop');
		  padding: 0 map.get($navbar, 'padding', 'laptop');
		  border-radius: map.get($navbar, 'border-radius', 'laptop');
		}

		@include respond-to('tablet') {
		  height: map.get($navbar, 'height', 'tablet');
		  padding: 0 map.get($navbar, 'padding', 'tablet');
		  border-radius: map.get($navbar, 'border-radius', 'tablet');
		}

		@include respond-to('mobile') {
		  height: map.get($navbar, 'height', 'mobile');
		  padding: 0 map.get($navbar, 'padding', 'mobile');
		  border-radius: map.get($navbar, 'border-radius', 'mobile');
		}

		// Mobile container with split layout
		.mobile-container {
			display: none;
			width: 100%;
			justify-content: space-between;
			align-items: center;
			position: relative;

			@include respond-to('desktop') {
				display: flex;
			}

			// Add a separator between the left and right containers
			&::after {
				content: '';
				position: absolute;
				left: 50%;
				top: 50%;
				transform: translate(-50%, -50%);
				height: 60%;
				width: 1px;
				background-color: rgba(255, 255, 255, 0.15);
				display: none;

				@include respond-to('desktop') {
					display: block;
				}
			}

			// Left container - Favicon and Menu toggle
			.mobile-left-container {
				display: flex;
				align-items: center;
				justify-content: flex-start;
				gap: 16px;
				padding-right: 24px;

				.favicon {
					display: flex;
					align-items: center;
					height: 100%;
					margin-left: 4px;

					a {
						display: flex;
						align-items: center;

						img {
							width: 28px;
							height: 28px;
							object-fit: contain;
						}
					}
				}

				.menu-phone {
					display: block;
					position: relative;

					> span {
						display: flex;
						align-items: center;
						justify-content: center;
						gap: 8px;
						width: 42px;
						height: 42px;
						padding: 8px;
						border-radius: 50%;
						background: rgba(255, 255, 255, 0.1);
						border: 1px solid rgba(255, 255, 255, 0.1);
						cursor: pointer;
						transition: all 0.3s ease;

						@include respond-to('tablet') {
							width: 40px;
							height: 40px;
						}

						@include respond-to('mobile') {
							width: 38px;
							height: 38px;
						}

						svg {
							color: var(--light-yellow-1);
							width: 24px;
							height: 24px;

							@include respond-to('mobile') {
								width: 22px;
								height: 22px;
							}
						}

						.menu-arrow {
							color: var(--light-yellow-1);
							transition: transform 0.2s ease;
							position: absolute;
							right: 2px;
							bottom: 4px;
							background-color: var(--logo-lime);
							color: var(--dark-green-7);
							width: 16px;
							height: 16px;
							border-radius: 50%;
							display: flex;
							align-items: center;
							justify-content: center;

							&.open {
								transform: rotate(180deg);
							}
						}

						&:hover {
							background: rgba(255, 255, 255, 0.15);
						}

						&:active {
							transform: scale(0.95);
						}
					}
				}
			}

			// Right container - Auth and Cart dropdowns
			.mobile-right-container {
				display: flex;
				align-items: center;
				justify-content: flex-end;
				padding-left: 24px;
				margin-right: 4px;

				.mobile-actions {
					display: flex;
					align-items: center;
					gap: 16px;

					.user-button, .cart-button {
						position: relative;

						.dropdown-trigger {
							display: flex;
							align-items: center;
							justify-content: center;
							width: 36px;
							height: 36px;
							border-radius: 50%;
							background: rgba(255, 255, 255, 0.1);
							border: 1px solid rgba(255, 255, 255, 0.1);
							padding: 0;
							color: var(--light-yellow-1);
							transition: all 0.3s ease;

							svg {
								color: var(--light-yellow-1);
								width: 20px;
								height: 20px;
							}

							&:hover {
								background: rgba(255, 255, 255, 0.15);
							}

							&:active {
								transform: scale(0.95);
							}

							.cart-count {
								position: absolute;
								top: -3px;
								right: -3px;
								width: 18px;
								height: 18px;
								background-color: var(--dark-yellow-1);
								color: var(--dark-green-7);
								font-size: 10px;
								font-weight: 600;
								border-radius: 50%;
								display: flex;
								align-items: center;
								justify-content: center;
							}

							// Style for dropdown arrow in mobile navbar
							.dropdown-arrow {
								position: absolute;
								right: -4px;
								bottom: -2px;
								width: 14px;
								height: 14px;
								background-color: var(--logo-lime);
								color: var(--dark-green-7);
								font-size: 10px;
								border-radius: 50%;
								display: flex;
								align-items: center;
								justify-content: center;
								transition: transform 0.2s ease;

								&.open {
									transform: rotate(180deg);
								}
							}
						}
					}
				}
			}
		}

		// Desktop container (original desktop layout)
		.desktop-container {
			display: flex;
			width: 100%;
			justify-content: space-between;
			align-items: center;

			@include respond-to('desktop') {
				display: none;
			}
		}

		.logo {
			height: 100%;
			display: flex;
			align-items: center;
			padding: 12px 0;
			flex-shrink: 0;
			margin-right: 0;
			min-width: 140px;

			@include respond-to('laptop') {
			  min-width: 120px;
			  padding: 10px 0;
			}

			@include respond-to('tablet') {
			  min-width: 100px;
			  padding: 8px 0;
			}

			@include respond-to('mobile') {
			  min-width: auto;
			  padding: 8px 0;
			}

			a {
				display: flex;
				align-items: center;
				height: 100%;

				img {
					height: 100%;
					width: auto;
					max-width: 160px;
					object-fit: contain;
					transition: all 0.3s ease;

					@include respond-to('laptop') {
					  max-width: 140px;
					}

					@include respond-to('tablet') {
					  max-width: 120px;
					}

					@include respond-to('mobile') {
					  max-width: 100px;
					}
				}
			}
		}

		.menu {
			display: flex;
			align-items: center;
			gap: 0;
			padding: 0;
			margin: 0;
			justify-content: center;
			flex: 1;
			min-width: 0;
			max-width: 480px;
			background: rgba(255, 255, 255, 0.1);
			border: 1px solid rgba(255, 255, 255, 0.05);
			border-radius: 50px;
			overflow: hidden;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

			@include respond-to('laptop') {
			  max-width: 400px;
			}

			@include respond-to('desktop') {
				display: none;
			}

			button {
				flex: 1;
				height: 40px;
				border-radius: 0;
				padding: 0 16px;
				color: var(--light-yellow-1);
				background: transparent;
				border: none;
				transition: all 0.2s ease;
				font-size: 14px;
				white-space: nowrap;
				position: relative;

				@include respond-to('laptop') {
				  padding: 0 12px;
				  font-size: 13px;
				}

				&:hover {
					background: rgba(255, 255, 255, 0.15);
				}

				&.active {
					background: rgba(255, 255, 255, 0.15);
					color: var(--dark-yellow-1);
				}

				svg {
					width: 18px;
					height: 18px;
					margin-right: 8px;
					color: currentColor;

					@include respond-to('laptop') {
					  width: 16px;
					  height: 16px;
					  margin-right: 6px;
					}
				}

				// Add separator after all buttons except the last one
				&:not(:last-child)::after {
					content: '';
					position: absolute;
					right: 0;
					top: 25%;
					bottom: 25%;
					width: 1px;
					background-color: rgba(255, 255, 255, 0.15);
				}

				// Apply special border radius to first and last buttons
				&:first-child {
					border-radius: 50px 8px 8px 50px;
				}

				&:last-child {
					border-radius: 8px 50px 50px 8px;
				}
			}
		}

		.cta {
			height: 100%;
			display: flex;
			gap: 8px;
			align-items: center;
			padding: 12px 0;
			flex-shrink: 0;
			margin-left: 0;
			min-width: 280px;

			@include respond-to('laptop') {
			  min-width: 220px;
			  padding: 10px 0;
			  gap: 6px;
			}

			@include respond-to('desktop') {
				display: none;
			}

			// Action buttons container
			.action-buttons {
				display: flex;
				align-items: center;
				gap: 0;
				margin-left: 8px;
				border-radius: 50px;
				background: rgba(255, 255, 255, 0.1);
				border: 1px solid rgba(255, 255, 255, 0.05);
				box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
				overflow: visible;
				position: relative;
				z-index: 100;

				@include respond-to('laptop') {
				  margin-left: 6px;
				}

				.user-button, .cart-button {
					position: relative;
					height: 40px;
					display: flex;

					@include respond-to('laptop') {
					  height: 36px;
					}
				}

				.user-button .dropdown-trigger {
					background: transparent !important;
					color: var(--light-yellow-1) !important;
					padding: 8px 12px 8px 16px;
					border: none;
					box-shadow: none;
					border-radius: 50px 8px 8px 50px;
					height: 100%;
					display: flex;
					align-items: center;

					@include respond-to('laptop') {
					  padding: 6px 10px 6px 12px;
					}

					&:hover {
						background: rgba(255, 255, 255, 0.15) !important;
						transform: translateY(0);
					}

					svg {
						color: var(--light-yellow-1) !important;
					}
				}

				.cart-button .dropdown-trigger {
					background: transparent !important;
					border: none;
					box-shadow: none;
					padding: 8px 16px 8px 12px;
					border-radius: 8px 50px 50px 8px;
					height: 100%;
					display: flex;
					align-items: center;

					@include respond-to('laptop') {
					  padding: 6px 12px 6px 10px;
					}

					&:hover {
						background: rgba(255, 255, 255, 0.15) !important;
						transform: translateY(0);
					}

					.cart-icon, .dropdown-arrow {
						color: var(--light-yellow-1) !important;
					}
				}

				.user-button::after {
					content: '';
					position: absolute;
					right: 0;
					top: 25%;
					bottom: 25%;
					width: 1px;
					background-color: rgba(255, 255, 255, 0.15);
				}
			}
		}

		// Mobile menu container
		.menu-phone {
			display: none;
			position: relative;
			z-index: 51;

			@include respond-to('desktop') {
				display: block;
			}
		}
	}

	// Mobile Menu styling
	.mobile-menu {
				position: fixed;
    top: calc(var(--navbar-height) + 12px);  // Add 12px for spacing
				left: 50%;
    transform: translateX(-50%) translateY(-10px);
    width: calc(100% - 32px); // Match container padding
				max-width: 420px;
				opacity: 0;
				visibility: hidden;
				pointer-events: none;
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 49;

				@include glass-effect;
    background-color: rgba(8, 68, 28, 0.98); // Slightly darker than navbar
    border-radius: 20px;
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.25), 0 8px 10px rgba(0, 0, 0, 0.15);

    @include respond-to('tablet') {
      top: calc(var(--navbar-height-tablet) + 10px);
    }

    @include respond-to('mobile') {
      top: calc(var(--navbar-height-mobile) + 8px);
      max-width: calc(100% - 20px);
      width: calc(100% - 20px);
      border-radius: 16px;
    }

				&.active {
					opacity: 1;
					visibility: visible;
					pointer-events: auto;
					transform: translateX(-50%) translateY(0);
				}

    .mobile-menu-content {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 20px;

      @include respond-to('mobile') {
        padding: 16px;
        gap: 16px;
      }

      .mobile-links {
					display: flex;
					flex-direction: column;
					gap: 12px;

					button {
						width: 100%;
						height: 48px;
						display: flex;
						align-items: center;
						justify-content: flex-start;
          padding: 0 16px;
          font-size: 16px;
          border-radius: 12px;
          background: rgba(255, 255, 255, 0.08);
						border: 1px solid rgba(255, 255, 255, 0.1);
						color: var(--light-yellow-1);
						transition: all 0.2s ease;
          text-align: left;

          @include respond-to('mobile') {
            height: 44px;
            font-size: 15px;
            padding: 0 14px;
          }

						svg {
							width: 20px;
							height: 20px;
							margin-right: 12px;
							color: currentColor;

            @include respond-to('mobile') {
              width: 18px;
              height: 18px;
              margin-right: 10px;
            }
						}

						&:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-1px);
						}

						&:active {
							transform: scale(0.98);
						}

						&.active {
							background: var(--dark-yellow-1);
							border-color: var(--dark-yellow-1);
							color: var(--dark-green-7);
						}
					}
				}

      .mobile-user-actions {
					display: none; // Hide since we've moved this to the navbar
				}

      .mobile-cta {
        margin-top: 8px;

        button {
          width: 100%;
          height: 48px;
					display: flex;
					align-items: center;
          justify-content: center;
          gap: 10px;
					border-radius: 12px;
          background: var(--dark-yellow-1);
          color: var(--dark-green-7);
					font-size: 16px;
          font-weight: 600;
          border: none;
          transition: all 0.2s ease;

          @include respond-to('mobile') {
            height: 44px;
						font-size: 15px;
          }

					svg {
						width: 20px;
						height: 20px;

            @include respond-to('mobile') {
						width: 18px;
						height: 18px;
					}
				}

				&:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
				}

          &:active {
            transform: scale(0.98);
					}
				}
      }
	}
}
}